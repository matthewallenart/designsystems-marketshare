<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Systems Treemap</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body, html {
            height: 100%;
            overflow: hidden;
            background: #000;
        }
        
        .treemap-rect {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .treemap-rect:hover {
            filter: brightness(1.1) drop-shadow(0 4px 12px rgba(0,0,0,0.3));
        }
        
        #treemap-svg {
            width: 100vw;
            height: 100vh;
            display: block;
        }
        
        #treemap-container {
            width: 100vw;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>
<body>
    <div id="treemap-container">
        <svg id="treemap-svg">
            <!-- SVG content will be generated by JavaScript -->
        </svg>
    </div>

    <script>
        // Design systems data
        const designSystems = [
            { name: 'Material Design', usage: 32.5, category: 'google', description: 'Google\'s comprehensive design system', downloads: '50M+', companies: ['Google', 'YouTube', 'Gmail'] },
            { name: 'Ant Design', usage: 18.2, category: 'enterprise', description: 'Enterprise-class React UI library', downloads: '15M+', companies: ['Alibaba', 'Tencent', 'Baidu'] },
            { name: 'Chakra UI', usage: 12.8, category: 'react', description: 'Modular and accessible React components', downloads: '8M+', companies: ['Microsoft', 'Segment', 'Coinbase'] },
            { name: 'Bootstrap', usage: 11.5, category: 'framework', description: 'World\'s most popular CSS framework', downloads: '25M+', companies: ['Twitter', 'Spotify', 'Airbnb'] },
            { name: 'Tailwind CSS', usage: 9.3, category: 'utility', description: 'Utility-first CSS framework', downloads: '12M+', companies: ['GitHub', 'Netflix', 'Shopify'] },
            { name: 'Mantine', usage: 6.4, category: 'react', description: 'Full-featured React components library', downloads: '3M+', companies: ['Vercel', 'Linear', 'Prisma'] },
            { name: 'Carbon Design', usage: 4.7, category: 'enterprise', description: 'IBM\'s open-source design system', downloads: '2M+', companies: ['IBM', 'Red Hat', 'Weather.com'] },
            { name: 'Fluent UI', usage: 3.9, category: 'microsoft', description: 'Microsoft\'s design system', downloads: '4M+', companies: ['Microsoft', 'Teams', 'Office'] },
            { name: 'Semantic UI', usage: 3.2, category: 'framework', description: 'UI component framework', downloads: '6M+', companies: ['Netflix', 'Amazon', 'Accenture'] },
            { name: 'Bulma', usage: 2.8, category: 'css', description: 'Modern CSS framework', downloads: '1.5M+', companies: ['GitLab', 'Buefy', 'Vue'] },
            { name: 'Foundation', usage: 2.1, category: 'framework', description: 'Advanced responsive framework', downloads: '3M+', companies: ['ZURB', 'Disney', 'Mozilla'] },
            { name: 'NextUI', usage: 1.8, category: 'react', description: 'Beautiful React UI library', downloads: '800K+', companies: ['Vercel', 'NextJS', 'Supabase'] },
            { name: 'Headless UI', usage: 1.6, category: 'headless', description: 'Unstyled accessible components', downloads: '2M+', companies: ['Tailwind', 'GitHub', 'Linear'] },
            { name: 'Grommet', usage: 1.3, category: 'react', description: 'React-based framework', downloads: '500K+', companies: ['HP', 'HPE', 'Aruba'] },
            { name: 'Primer', usage: 1.1, category: 'github', description: 'GitHub\'s design system', downloads: '300K+', companies: ['GitHub', 'NPM', 'Atom'] },
            { name: 'Others', usage: 6.8, category: 'various', description: 'Various other design systems', downloads: 'N/A', companies: ['Various'] }
        ];

        let hoveredSystem = null;

        // Color scheme
        function getSystemColor(usage) {
            if (usage >= 20) return '#00D4FF'; // Cyan for dominant systems
            if (usage >= 8) return '#FFD700';  // Gold for major systems  
            if (usage >= 3) return '#FFA500';  // Orange for medium systems
            return '#DAA520'; // Dark goldenrod for smaller systems
        }

        // Calculate treemap layout for dynamic screen dimensions
        function calculateLayout(systems) {
            const containerWidth = window.innerWidth;
            const containerHeight = window.innerHeight;
            const sortedSystems = [...systems].sort((a, b) => b.usage - a.usage);
            const rectangles = [];
            
            // Manual layout optimized for any screen ratio
            const dominant = sortedSystems[0]; // Material Design
            const major = sortedSystems.slice(1, 3); // Ant Design, Chakra UI
            const medium = sortedSystems.slice(3, 8); // Bootstrap through Fluent UI
            const small = sortedSystems.slice(8);
            
            // Dominant system takes left side
            const dominantWidth = containerWidth * 0.4;
            rectangles.push({
                ...dominant,
                x: 0,
                y: 0,
                width: dominantWidth,
                height: containerHeight
            });
            
            // Right side layout
            const rightX = dominantWidth;
            const rightWidth = containerWidth - dominantWidth;
            
            // Top right - major systems
            const majorHeight = containerHeight * 0.35;
            let currentX = rightX;
            major.forEach(system => {
                const ratio = system.usage / (major[0].usage + major[1].usage);
                const width = ratio * rightWidth;
                rectangles.push({
                    ...system,
                    x: currentX,
                    y: 0,
                    width: width,
                    height: majorHeight
                });
                currentX += width;
            });
            
            // Middle right - medium systems in 2x2 grid
            const mediumY = majorHeight;
            const mediumHeight = containerHeight * 0.4;
            const mediumWidth = rightWidth / 2;
            
            for (let i = 0; i < Math.min(4, medium.length); i++) {
                const row = Math.floor(i / 2);
                const col = i % 2;
                rectangles.push({
                    ...medium[i],
                    x: rightX + (col * mediumWidth),
                    y: mediumY + (row * mediumHeight / 2),
                    width: mediumWidth,
                    height: mediumHeight / 2
                });
            }
            
            // Bottom right - small systems
            const smallY = majorHeight + mediumHeight;
            const smallHeight = containerHeight - smallY;
            const smallWidth = rightWidth / Math.min(4, small.length);
            
            small.slice(0, 4).forEach((system, index) => {
                rectangles.push({
                    ...system,
                    x: rightX + (index * smallWidth),
                    y: smallY,
                    width: smallWidth,
                    height: smallHeight
                });
            });
            
            return rectangles;
        }

        // Create SVG text element
        function createSVGText(x, y, text, fontSize, fill = 'white', fontWeight = 'normal') {
            const textEl = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            textEl.setAttribute('x', x);
            textEl.setAttribute('y', y);
            textEl.setAttribute('text-anchor', 'middle');
            textEl.style.fontSize = fontSize;
            textEl.style.fill = fill;
            textEl.style.fontWeight = fontWeight;
            textEl.style.pointerEvents = 'none';
            textEl.style.fontFamily = 'Arial, sans-serif';
            textEl.textContent = text;
            return textEl;
        }

        // Create SVG rect element
        function createSVGRect(x, y, width, height, fill, stroke = '#ffffff', strokeWidth = '4') {
            const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            rect.setAttribute('x', x);
            rect.setAttribute('y', y);
            rect.setAttribute('width', width);
            rect.setAttribute('height', height);
            rect.setAttribute('fill', fill);
            rect.setAttribute('stroke', stroke);
            rect.setAttribute('stroke-width', strokeWidth);
            rect.setAttribute('class', 'treemap-rect');
            return rect;
        }

        // Render treemap
        function renderTreemap() {
            const svg = document.getElementById('treemap-svg');
            const containerWidth = window.innerWidth;
            const containerHeight = window.innerHeight;
            
            // Set SVG dimensions and viewBox to match screen
            svg.setAttribute('width', containerWidth);
            svg.setAttribute('height', containerHeight);
            svg.setAttribute('viewBox', `0 0 ${containerWidth} ${containerHeight}`);
            svg.innerHTML = '';
            
            const layoutSystems = calculateLayout(designSystems);

            layoutSystems.forEach(system => {
                const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                
                // Create rectangle
                const rect = createSVGRect(
                    system.x, 
                    system.y, 
                    system.width, 
                    system.height, 
                    getSystemColor(system.usage)
                );
                
                // Add hover events
                rect.addEventListener('mouseenter', () => {
                    hoveredSystem = system.name;
                    renderTreemap();
                });
                
                rect.addEventListener('mouseleave', () => {
                    hoveredSystem = null;
                    renderTreemap();
                });

                group.appendChild(rect);

                if (hoveredSystem !== system.name) {
                    // Default view - System name
                    const fontSize = system.width > 300 ? '32px' : system.width > 200 ? '24px' : system.width > 100 ? '18px' : '14px';
                    const nameText = createSVGText(
                        system.x + system.width / 2,
                        system.y + system.height / 2 - 10,
                        system.name,
                        fontSize,
                        'black',
                        'bold'
                    );
                    group.appendChild(nameText);
                    
                    // Default view - Usage percentage
                    const usageFontSize = system.width > 300 ? '28px' : system.width > 200 ? '20px' : system.width > 100 ? '16px' : '12px';
                    const usageText = createSVGText(
                        system.x + system.width / 2,
                        system.y + system.height / 2 + 25,
                        system.usage + '%',
                        usageFontSize,
                        'black',
                        'bold'
                    );
                    group.appendChild(usageText);
                } else {
                    // Hover view - Background
                    const hoverBg = createSVGRect(
                        system.x + 10,
                        system.y + 10,
                        system.width - 20,
                        system.height - 20,
                        'rgba(0,0,0,0.85)',
                        'rgba(255,255,255,0.3)',
                        '2'
                    );
                    hoverBg.setAttribute('rx', '12');
                    hoverBg.style.pointerEvents = 'none';
                    group.appendChild(hoverBg);
                    
                    // System name in hover
                    const hoverNameSize = system.width > 300 ? '28px' : system.width > 200 ? '20px' : system.width > 100 ? '16px' : '12px';
                    const hoverName = createSVGText(
                        system.x + system.width / 2,
                        system.y + 50,
                        system.name,
                        hoverNameSize,
                        'white',
                        'bold'
                    );
                    group.appendChild(hoverName);
                    
                    // Usage Stats for larger cards
                    if (system.width > 150 && system.height > 120) {
                        const statSize = system.width > 300 ? '18px' : system.width > 200 ? '14px' : '12px';
                        const baseY = 80;
                        
                        const marketShare = createSVGText(
                            system.x + system.width / 2,
                            system.y + baseY,
                            `Market Share: ${system.usage}%`,
                            statSize,
                            '#00D4FF'
                        );
                        group.appendChild(marketShare);
                        
                        const downloads = createSVGText(
                            system.x + system.width / 2,
                            system.y + baseY + 30,
                            `Downloads: ${system.downloads}`,
                            statSize,
                            '#FFD700'
                        );
                        group.appendChild(downloads);
                        
                        const companies = createSVGText(
                            system.x + system.width / 2,
                            system.y + baseY + 60,
                            `Used by: ${system.companies.slice(0, 2).join(', ')}`,
                            system.width > 300 ? '16px' : system.width > 200 ? '12px' : '10px',
                            '#FFA500'
                        );
                        group.appendChild(companies);
                        
                        if (system.width > 300 && system.height > 200 && system.companies.length > 2) {
                            const moreCompanies = createSVGText(
                                system.x + system.width / 2,
                                system.y + baseY + 90,
                                `+${system.companies.length - 2} more companies`,
                                '14px',
                                '#DAA520'
                            );
                            group.appendChild(moreCompanies);
                        }
                    } else {
                        // For smaller cards, show condensed stats
                        const condensed = createSVGText(
                            system.x + system.width / 2,
                            system.y + system.height / 2,
                            `${system.usage}%`,
                            system.width > 100 ? '16px' : '12px',
                            '#00D4FF',
                            'bold'
                        );
                        group.appendChild(condensed);
                        
                        const company = createSVGText(
                            system.x + system.width / 2,
                            system.y + system.height / 2 + 25,
                            system.companies[0],
                            system.width > 100 ? '12px' : '10px',
                            'white'
                        );
                        group.appendChild(company);
                    }
                }
                
                svg.appendChild(group);
            });
        }

        // Handle window resize
        function handleResize() {
            renderTreemap();
        }

        window.addEventListener('resize', handleResize);

        // Initial render
        renderTreemap();
    </script>
</body>
</html>